# ตารางเก็บข้อมูลการจอง (Booking)
type Booking @model @auth(rules: [
  # อนุญาตให้ทุกคนที่ล็อกอิน (Private) สามารถจัดการข้อมูลได้ 
  # (เพื่อให้ Admin/ช่าง/บัญชี มองเห็นและแก้ไขงานของลูกค้าได้)
  { allow: private }
]) {
  id: ID!
  customerName: String!
  phoneNumber: String!
  carBrand: String!
  carYear: String!
  licensePlate: String!
  mileage: Int!           # ระยะทางที่ลูกค้าเลือกจองมา (เช่น 10,000)
  selectedItems: String!  # เก็บรายการของที่เบิกเป็น JSON String
  totalPrice: Float!
  bookingDate: AWSDate!
  bookingTime: AWSTime!
  status: String          # PENDING, CONFIRMED, IN_PROGRESS, COMPLETED, CLOSED
  
  # --- ฟิลด์ที่เพิ่มมาใหม่ ---
  mechanicName: String    # ชื่อช่างที่กดรับงาน
  actualMileage: Int      # เลขไมล์จริงบนหน้าปัด (ที่ช่างกรอกตอนเริ่มงาน)
}

# ตารางเก็บสินค้า (Part)
type Part @model @auth(rules: [
  # allow: public เพื่อให้หน้าเว็บดึงข้อมูลมาแสดงได้โดยไม่ต้อง login
  { allow: public }, 
  # allow: private เพื่อให้ Admin ที่ login แล้วสามารถเพิ่ม/ลบ/แก้ไขได้
  { allow: private }
]) {
  id: ID!
  categoryKey: String!    # รหัสหมวดหมู่ (เช่น engineOil)
  categoryName: String!   # ชื่อหมวดหมู่ (เช่น น้ำมันเครื่อง)
  name: String!           # ชื่อสินค้า
  price: Int!             # ราคา
  isFixed: Boolean!       # (เลิกใช้แล้ว แต่เก็บไว้กัน Error)
  
  # --- ฟิลด์ที่เพิ่มมาใหม่ ---
  stock: Int              # จำนวนสินค้าคงเหลือในสต็อก
}